===========================================
BOOSTLY – TEST CASES (MANUAL VERIFICATION)
===========================================

This document explains how to test every feature of the Boostly backend API.
Use curl, Postman, or Thunder Client to verify all endpoints.

-------------------------------------------
FEATURE 1: STUDENTS
-------------------------------------------

Test 1: Create 3 new students (Alice, Bob, Carol)
Steps:
1. POST /api/students
   Body: {"name": "Alice", "email": "alice@test.com"}

2. POST /api/students
   Body: {"name": "Bob", "email": "bob@test.com"}

3. POST /api/students
   Body: {"name": "Carol", "email": "carol@test.com"}

Expected Result:
- 201 Created for each request.
- Returned IDs should be 1, 2, 3 (in that order).


-------------------------------------------
FEATURE 2: RECOGNITION (CORE TRANSACTION)
-------------------------------------------

Test 2.1: Alice (ID 1) sends 30 credits to Bob (ID 2)
Steps:
POST /api/recognitions
Headers: X-User-Id: 1
Body: {"receiver_id": 2, "amount": 30, "message": "Great work!"}

Expected Result:
- 201 Created.
- Recognition is stored.
- Credits transferred atomically.

Test 2.2: Verify updated balances
Steps:
1. GET /api/students/1   (Header: X-User-Id: 1)
2. GET /api/students/2   (Header: X-User-Id: 2)

Expected Result:
- Alice: sending_balance = 70, monthly_sending_limit_used = 30
- Bob: received_balance = 30

Test 2.3: Block self-recognition
Steps:
POST /api/recognitions
Header: X-User-Id: 1
Body: {"receiver_id": 1, "amount": 10}

Expected:
- 400 Bad Request
- Error message: "Cannot send recognition to yourself"

Test 2.4: Block insufficient balance
Steps:
POST /api/recognitions
Header: X-User-Id: 1
Body: {"receiver_id": 2, "amount": 9999}

Expected:
- 400 Bad Request
- Error message about insufficient sending balance.


-------------------------------------------
FEATURE 3: ENDORSEMENTS (CORE)
-------------------------------------------

Test 3.1: Carol (ID 3) endorses recognition (ID 1)
Steps:
POST /api/endorsements
Header: X-User-Id: 3
Body: {"recognition_id": 1}

Expected:
- 201 Created

Test 3.2: Block duplicate endorsement
Steps:
Send the exact same request again.

Expected:
- 409 Conflict
- Error: "You have already endorsed this recognition"


-------------------------------------------
FEATURE 4: REDEMPTION (CORE)
-------------------------------------------

Test 4.1: Bob redeems 10 credits
Steps:
POST /api/redemptions
Header: X-User-Id: 2
Body: {"credits_redeemed": 10}

Expected:
- 201 Created

Test 4.2: Verify Bob's balance
Steps:
GET /api/students/2
Header: X-User-Id: 2

Expected:
- Bob’s received_balance = 20  (30 - 10)


-------------------------------------------
FEATURE 5: LEADERBOARD (STEP-UP FEATURE)
-------------------------------------------

Test 5.1: Fetch top 3 students
Steps:
GET /api/leaderboard?limit=3
Header: X-User-Id: 1

Expected:
- 200 OK
- Bob (ID 2) should be first because he has the highest received_balance (20)


-------------------------------------------
FEATURE 6: MONTHLY CREDIT RESET (STEP-UP FEATURE)
-------------------------------------------

Current known state before reset:
- Alice sending_balance = 70
- Bob sending_balance = 100

Test 6.1: Trigger monthly reset
Steps:
POST /api/admin/reset-credits
(no auth, empty body)

Expected:
- 200 OK

Test 6.2: Verify updated balances after reset
Steps:
1. GET /api/students/1   (X-User-Id: 1)
2. GET /api/students/2   (X-User-Id: 2)

Expected:
Reset rule: base = 100, carry-over capped at 50.

So after reset:
- Alice sending_balance = 100 + 50 = 150  (because she had 70 → carry-over = 50 max)
- Bob sending_balance = 100 + 50 = 150    (because he had 100 → carry-over = 50 max)

-------------------------------------------
END OF TEST CASE FILE
-------------------------------------------
